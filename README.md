# random-metrics-generator

Implement a system that generates multiple random metrics where it could be any metric like temperature, speed and etc) with gps coordinates

## Getting Started

These instructions will get you a copy of the project up and running on your local machine for development and testing purposes. See deployment for notes on how to deploy the project on a live system.

> Prerequisite

* Docker 
* Docker-compose

> Steps

1. Clone the repository where docker service is available.
2. Go inside the project directory using command line.
3. Run docker-compose up to start services RabbitMQ server, Mysql server, Producer application, Consumer application
4. To rebuild the application use docker-compose build and then docker-compose up to start all the services.
5. Services link
	RabbitMQ http://IP:15672/
	Producer http://IP:8080/
	Consumer http://IP:8081/
	RabbitMQ, MySql, Producer, Consumer configuration is provided in docker-compose.yml file. Please check and modify according to your need.
	
	*IP is your machine ip where docker service is available*

5. Test the Metrics generator system using swagger http://IP:8080/swagger-ui.html#/ by providing the payload.
   or you can use any REST API test tools such as Postman or SoapUI.
     
6). API payload is given below.  
  

## Task Description

There will be two APIs to generate Metrics:

* The first one is where you create your own payload.
* The second one send random payload that is system generated by providing metrics count.


#### POST /generate-metrics

Body:

```
[
  {
    "data": [
      {}
    ],
    "lat": "string",
    "lon": "string",
    "metricsType": "string"
  }
]
```

where:

* Data is payload for metricsType. As per request metrics payload could be any, So it could be any valid json format data.
* lat is latitude for GPS coordinates.
* lon is longitude for GPS coordinates.
* metricsType is name of metrics type like temperature, speed.
* 201 - in case of success


#### POST /generate-metrics/random

This is the endpoint will generate random metrics payload depending on count and data in one payload request. 

if payload count is 2 and total count is 100 then 50 request send to RabbitMQ.


Request:

```
{
"totalPayloadRequest": 2,
}
```

Response :

```
[
  {
    "data": [
      {}
    ],
    "lat": "string",
    "lon": "string",
    "metricsType": "string"
  }
]
```

## Development and Architecture Aspects

> Technology/Tools used

* Java 8
* Spring boot
* Maven 
* Swagger for documentation
* RabbitMQ
* MySql server
* Docker

> Following Development principles are used

<I>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Clean Code, KISS, DRY, SOLID and Oops principle.</I>

## Test Cases

Unit Test cases and Integration test cases were written. Please use below command to run test cases under /random-metrics-generator-consumer, /random-metrics-generator-producer folder


```
mvn clean test
```



